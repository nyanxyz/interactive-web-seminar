<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Gothic+A1:wght@400;500;700&family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container">
      <div class="hero-video-section">
        <!-- TODO -->
        <video autoplay muted class="hero-video-section__video">
          <source
            src="https://www.apple.com/105/media/us/imac-24/2021/5e004d75-3ad6-4bb9-ab59-41f891fc52f0/anim/hero/large_2x.mp4"
            type="video/mp4"
          />
        </video>
      </div>

      <div class="hero-text-section">
        <div>
          <span class="color-green">이제</span>
          <span class="color-yellow">새로운</span>
          <span class="color-orange">iMac</span
          ><span class="color-pink">을</span>
          <span class="color-purple">만날</span>
          <span class="color-blue">시간</span>.
        </div>

        <div>
          Apple 최고의 기술과 디자인이 응집되어, M1&nbsp;칩으로 완전히 새롭게
          탄생했습니다. 어느&nbsp;공간에서나 돋보이고, 어떤 삶의 방식과도 완벽히
          어우러지죠.
        </div>
      </div>

      <div class="color-section">
        <div>개성 넘치는 일곱 가지 컬러.</div>
        <div class="color-section__bottom-row">
          당신을 표현하는

          <span class="color-section__color-text">
            <span class="color-green">그린.</span>
            <span class="color-yellow">옐로.</span>
            <span class="color-orange">오렌지.</span>
            <span class="color-pink">핑크.</span>
            <span class="color-purple">퍼플.</span>
            <span class="color-blue">블루.</span>
            <span class="color-silver">실버.</span>
            <span class="gradient-text">색깔.</span>
          </span>
        </div>
      </div>

      <div class="thin-section">
        <div class="thin-section__text-wrapper">
          <div class="thin-section__text">
            불과<br />11.5mm.<br />얇다는 건<br />이런 것.
          </div>
        </div>
      </div>

      <div class="display-section">
        <div class="display-section__white-cover"></div>
        <img
          class="display-section__image"
          src="https://www.apple.com/kr/imac-24/g/images/overview/display_hero_startframe__cti3wn2s1x2e_medium_2x.jpg"
        />
        <div class="display-section__text">미려한 4.5K Retina 디스플레이</div>
        <div class="display-section__image-space"></div>
        <div class="display-section__empty-space"></div>
      </div>
    </div>

    <script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/debug.addIndicators.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/TweenMax.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.5/plugins/animation.gsap.js"></script>

    <script>
      function handleScroll1() {
        const heroTextEl = document.querySelector(".hero-text-section");
        const { top, bottom } = heroTextEl.getBoundingClientRect();

        if (top >= 0 && bottom <= window.innerHeight) {
          window.removeEventListener("scroll", handleScroll1);
          setTimeout(() => {
            heroTextEl.style.opacity = "1";
          }, 450);
        }
      }
      window.addEventListener("scroll", handleScroll1);

      function handleScroll2() {
        const element = document.querySelector(".color-section");
        const { top, bottom } = element.getBoundingClientRect();

        let count = 0;
        let id;

        if (top >= 0 && bottom <= window.innerHeight) {
          window.removeEventListener("scroll", handleScroll2);

          const colorTextWrapper = document.querySelector(
            ".color-section__color-text"
          );
          id = setInterval(() => {
            if (count === 6) {
              clearInterval(id);
            }

            colorTextWrapper.style.transform = `translateY(-${
              ++count * 67.6
            }px)`;
          }, 800);
        }
      }
      window.addEventListener("scroll", handleScroll2);

      const controller = new ScrollMagic.Controller();

      const tween1 = TweenMax.to(".thin-section__text", 0.5, {
        scale: 0.15,
      });
      new ScrollMagic.Scene({
        triggerElement: ".thin-section",
        offset: 320,
        duration: 1000,
      })
        .setTween(tween1)
        .addTo(controller);

      const tween2 = TweenMax.to(".display-section__image", 0.5, {
        scale: 0.7,
      });
      new ScrollMagic.Scene({
        triggerElement: ".display-section__empty-space",
        offset: 600,
        duration: 1000,
      })
        .setTween(tween2)
        .addTo(controller);

      const tween3 = TweenMax.to(".display-section__text", 0.5, {
        opacity: 1,
      });
      new ScrollMagic.Scene({
        triggerElement: ".display-section__empty-space",
        offset: -200,
        duration: 200,
      })
        .setTween(tween3)
        .addTo(controller);

      const tween4 = TweenMax.to(".display-section__text", 0.5, {
        opacity: 0,
      });
      new ScrollMagic.Scene({
        triggerElement: ".display-section__empty-space",
        offset: 250,
        duration: 200,
      })
        .setTween(tween4)
        .addTo(controller);
    </script>
  </body>
</html>
